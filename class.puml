@startuml
title GAZFood — Диаграмма классов (сокращённая)

skinparam class {
  BackgroundColor White
  BorderColor Black
  ArrowColor Black
}
skinparam stereotypeCBackgroundColor #ECECEC

' ======================= Д О М Е Н Н А Я  М О Д Е Л Ь =======================
package "Доменная модель" {

  class Клиент {
    +id
    +имя
    +создатьЗаказ()
  }

  enum СтатусЗаказа {
    НОВЫЙ
    ОПЛАЧЕН
    ГОТОВИТСЯ
    ОЖИД_КУРЬЕРА
    ДОСТАВКА
    ДОСТАВЛЕН
    ОТМЕНЁН
  }

  class Заказ {
    +id
    +статус : СтатусЗаказа
    +сумма
    +добавитьПозицию()
    +оплатить()
  }

  class Позиция {
    +количество
    +цена
  }

  class ПунктМеню {
    +id
    +название
    +цена
  }

  class Ресторан {
    +id
    +название
    +адрес
    +принятьЗаказ()
  }

  enum СпособОплаты {
    КАРТА
    APPLE_PAY
    GOOGLE_PAY
  }

  enum СостояниеПлатежа {
    ИНИЦИАЛИЗАЦИЯ
    АВТОРИЗОВАН
    ОТКЛОНЁН
  }

  class Платёж {
    +id
    +способ    : СпособОплаты
    +состояние : СостояниеПлатежа
    +сумма
    +списать()
  }

  class Курьер {
    +id
    +имя
    +принятьЗаказ()
    +обновитьСтатус()
  }
}

' =================== С Е Р В И С Ы   И   И Н Т Е Р Ф Е Й С Ы =================
package "Сервисы и интерфейсы" {

  class СервисУведомлений <<(S,#orchid)>> {
    +отправитьPush()
  }

  interface РепозиторийЗаказов {
    +сохранить()
    +найтиПоId()
  }

  interface ПлатёжныйШлюз {
    +авторизовать()
  }

  class СервисЗаказов <<(S,#lightblue)>> {
    +создатьЗаказ()
    +обработатьОплату()
  }
}

' ======================= С В Я З И   М Е Ж Д У   К Л А С С А М И =============
Клиент        "1" -- "0..*" Заказ
Заказ         "1" *-- "1..*" Позиция            : включает
Позиция       "0..*" -- "1"  ПунктМеню
ПунктМеню     "*"  o-- "1"   Ресторан           : часть меню
Заказ         "1"  -- "1"    Платёж
Курьер        "1"  -- "0..*" Заказ              : доставляет

СервисУведомлений ..> Клиент
СервисЗаказов      ..> РепозиторийЗаказов
СервисЗаказов      ..> ПлатёжныйШлюз
СервисЗаказов      ..> СервисУведомлений

@enduml
